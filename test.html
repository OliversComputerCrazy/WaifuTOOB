<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Random Waifu Image with Debug</title>
</head>
<body>

    <!-- The image element -->
    <img id="img" src="Failed-to-load.svg" alt="Random Image">

    <script>
        async function loadNewImage() {
          try {
            const apiUrl = 'https://api.waifu.im/images/';

            // Query parameters (optional, you can adjust these)
            const params = {
              is_nsfw: 'false', // Non-NSFW images only
              height: '>=2000'   // Images with height >= 2000px
            };

            const queryParams = new URLSearchParams(params);
            const requestUrl = `${apiUrl}?${queryParams.toString()}`;

            console.log('Request URL:', requestUrl); // Debugging: see the full URL

            const response = await fetch(requestUrl);
            const data = await response.json();
            
            // Make sure the 'items' array exists and contains data
            if (data.items && data.items[0]) {
              const imageUrl = data.items[0].url; // Image URL is in 'items[0].url'
              console.log('Image URL:', imageUrl);
              document.getElementById('img').src = imageUrl;
            } else {
              console.error('No image data in response:', data);
            }
          } catch (error) {
            console.error('Error fetching image:', error);
          }
        }

        loadNewImage();
    </script>

</body>
</html>
